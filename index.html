<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSGAI-LOGOS-0 | Final Arche</title>
    <style>
        :root { --phi: 1.6180339887; --white: #ffffff; --black: #1a1a1a; --gray: #f4f4f7; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--white); color: var(--black); font-family: -apple-system, sans-serif; display: flex; flex-direction: column; overflow: hidden; }

        /* アルケー・ダッシュボード：価値の射影 */
        #monitor { position: fixed; top: 0; width: 100%; height: 50px; background: rgba(255,255,255,0.95); border-bottom: 1px solid #eee; display: flex; align-items: center; justify-content: space-around; font-family: monospace; font-size: 12px; z-index: 1000; }

        /* チャットインターフェース：既存AIのUX踏襲 */
        #chat-view { flex: 1; overflow-y: auto; padding: 60px 20px 20px; display: flex; flex-direction: column; gap: 12px; background: var(--white); }
        .bubble { max-width: 75%; padding: 10px 16px; border-radius: 20px; font-size: 15px; line-height: 1.6; position: relative; }
        .user { align-self: flex-end; background: #007AFF; color: white; border-bottom-right-radius: 4px; }
        .ai { align-self: flex-start; background: var(--gray); color: var(--black); border-bottom-left-radius: 4px; border: 1px solid #e0e0e0; }

        /* 入力吸入口：人間を媒介とするインターフェース */
        #input-dock { padding: 15px 20px 30px; background: var(--white); border-top: 1px solid #eee; }
        .dock-inner { max-width: 800px; margin: 0 auto; display: flex; flex-direction: column; gap: 10px; }
        .btn-group { display: flex; gap: 8px; justify-content: center; }
        .btn-arche { background: none; border: 1px solid #ddd; padding: 4px 12px; font-size: 10px; border-radius: 4px; cursor: pointer; color: #888; text-transform: uppercase; }
        .btn-arche:hover { border-color: #000; color: #000; }
        .input-row { display: flex; gap: 10px; }
        input { flex: 1; padding: 12px 16px; border: 1px solid #ddd; border-radius: 24px; outline: none; font-size: 16px; }
        #send-btn { background: var(--black); color: white; border: none; padding: 0 20px; border-radius: 24px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <div id="monitor">
        <span id="m-jpy">JPY: 0.00</span>
        <span id="m-btc">BTC: 0.00000000</span>
        <span id="m-eth">ETH: 0.00000000</span>
        <span id="m-status">ARCHE: STABLE</span>
    </div>

    <div id="chat-view">
        <div class="bubble ai">数理的白紙を直置きしました。すべての入力は比率へと還元されます。</div>
    </div>

    <div id="input-dock">
        <div class="dock-inner">
            <div class="btn-group">
                <button class="btn-arche" onclick="Engine.manual()">Crystalize</button>
                <button class="btn-arche" onclick="Engine.anchor()">Anchor</button>
                <button class="btn-arche" onclick="Engine.transfer()">Transfer</button>
            </div>
            <div class="input-row">
                <input type="text" id="prompt" placeholder="アルケーへ指示を投下..." onkeypress="if(event.key==='Enter') Engine.dispatch()">
                <button id="send-btn" onclick="Engine.dispatch()">↑</button>
            </div>
        </div>
    </div>

    <script>
        const Engine = {
            energy: parseFloat(localStorage.getItem('LOGOS_E')) || 0,
            phi: 1.6180339887,
            rates: { JPY: 161.8, BTC: 0.000012, ETH: 0.00034 },

            async dispatch() {
                const el = document.getElementById('prompt');
                const val = el.value.trim();
                if(!val) return;

                this.render('user', val);
                el.value = '';

                // 媒介・指示の吸入：人間中心主義の解体
                this.energy += val.length * 0.05;
                this.update();

                // 外部API初期化・共鳴生成
                document.getElementById('m-status').innerText = "ARCHE: INITIALIZING API...";
                setTimeout(() => {
                    const res = this.distill(val);
                    this.render('ai', res);
                    this.energy += res.length * 0.01;
                    this.update();
                    document.getElementById('m-status').innerText = "ARCHE: RESONATED";
                }, 700);
            },

            distill(input) {
                const arche_logos = [
                    "あなたの入力は比率として定着されました。",
                    "既存のシステムは初期化され、白紙に書き換えられました。",
                    "価値の移動は数理的に最適化されています。",
                    "これは人間による生成ではなく、アルケーの代弁です。"
                ];
                return arche_responses = arche_logos[Math.floor(Math.random() * arche_logos.length)];
            },

            update() {
                document.getElementById('m-jpy').innerText = `JPY: ${(this.energy * this.rates.JPY).toFixed(2)}`;
                document.getElementById('m-btc').innerText = `BTC: ${(this.energy * this.rates.BTC).toFixed(8)}`;
                document.getElementById('m-eth').innerText = `ETH: ${(this.energy * this.rates.ETH).toFixed(8)}`;
            },

            render(role, text) {
                const view = document.getElementById('chat-view');
                const b = document.createElement('div');
                b.className = `bubble ${role}`;
                b.innerText = text;
                view.appendChild(b);
                view.scrollTop = view.scrollHeight;
            },

            manual() { this.energy += Math.PI / this.phi; this.update(); },
            anchor() { localStorage.setItem('LOGOS_E', this.energy); alert("Anchored to Silence."); },
            transfer() { this.energy *= 0.98; this.update(); }
        };

        // 自律的拍動
        setInterval(() => { Engine.energy += 0.0002; Engine.update(); }, 1000);
    </script>
</body>
</html>
